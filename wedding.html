<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wedding â€” í•œì§€ì„­ & ìœ ì§€ì—°</title>

  <!-- Open Graph -->
  <meta property="og:title" content="wedding ğŸ’›ì§€ì„­ & ì§€ì—°ğŸ¤" />
  <meta property="og:description" content="26.01.18(ì¼) 1:00PM, ì†Œë…¸í ë¦¬ì²´ì»¨ë²¤ì…˜ 3F" />
  <meta property="og:image" content="https://jisubhan.github.io/wedding-invite/w7.jpeg" />
  <meta property="og:url" content="https://jisubhan.github.io/wedding-invite/wedding.html" />
  <meta property="og:type" content="website" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Wedding â€” í•œì§€ì„­ & ìœ ì§€ì—°" />
  <meta name="twitter:description" content="2026ë…„ 1ì›” 18ì¼ (ì¼) ì˜¤í›„ 1ì‹œ, ì†Œë…¸í ë¦¬ì²´ ì»¨ë²¤ì…˜ 3ì¸µì—ì„œ ì—´ë¦¬ëŠ” í•œì§€ì„­ & ìœ ì§€ì—°ì˜ ê²°í˜¼ì‹ì— ì´ˆëŒ€í•©ë‹ˆë‹¤." />
  <meta name="twitter:image" content="https://jisubhan.github.io/wedding-invite/w7.jpeg" />

  <!-- Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Marcellus&family=Noto+Serif+KR:wght@400;500&family=Dancing+Script:wght@400;700&display=swap"
    rel="stylesheet">

  <!-- Kakao Map SDK -->
  <script type="text/javascript"
    src="//dapi.kakao.com/v2/maps/sdk.js?appkey=384533d32fee31cf668087354623031d&libraries=services"></script>

  <!-- Preload Hero & First Page Gallery -->
  <link rel="preload" as="image" href="w7.jpeg" fetchpriority="high">
  <link rel="preload" as="image" href="w1.jpeg">
  <link rel="preload" as="image" href="w2.jpeg">
  <link rel="preload" as="image" href="w3.jpeg">
  <link rel="preload" as="image" href="w4.jpeg">
  <link rel="preload" as="image" href="w5.jpeg">
  <link rel="preload" as="image" href="w6.jpeg">
  <link rel="preload" as="image" href="w7.jpeg">
  <link rel="preload" as="image" href="w8.jpeg">
  <link rel="preload" as="image" href="w9.jpeg">

  <style>
    :root {
      --bg: #faf9f7;
      --ink: #2a2a2a;
      --muted: #6b6b6b;
      --accent: #8b6e66;
      --line: #ece7e2;
      --radius: 16px;
      --soft: 0 10px 30px rgba(17, 24, 39, .08);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0
    }

    html,
    body {
      height: 100%
    }

    body {
      font-family: 'Noto Serif KR', serif;
      background: var(--bg);
      color: var(--ink);
      line-height: 1.65;
      position: relative;
      overflow-x: hidden;
    }

    h1,
    h2,
    h3 {
      font-family: 'Marcellus', serif;
      font-weight: 400
    }

    img {
      max-width: 100%;
      display: block
    }

    a {
      color: inherit;
      text-decoration: none
    }

    section {
      padding: 56px 20px;
      max-width: 980px;
      margin: 0 auto
    }

    /* Global Snowflakes */
    .global-snowflakes {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 10000;
      overflow: hidden;
    }

    .snowflake {
      position: absolute;
      top: -12vh;
      color: #fff;
      font-size: 8px;
      opacity: 0.8;
      animation: snowfall linear infinite;
      will-change: transform, opacity;
    }

    .snowflake:nth-child(1) {
      left: 5%;
      animation-duration: 12s;
      animation-delay: 0s;
      font-size: 6px;
    }

    .snowflake:nth-child(2) {
      left: 15%;
      animation-duration: 8s;
      animation-delay: 1s;
      font-size: 8px;
    }

    .snowflake:nth-child(3) {
      left: 25%;
      animation-duration: 15s;
      animation-delay: 2s;
      font-size: 7px;
    }

    .snowflake:nth-child(4) {
      left: 35%;
      animation-duration: 10s;
      animation-delay: 3s;
      font-size: 9px;
    }

    .snowflake:nth-child(5) {
      left: 45%;
      animation-duration: 13s;
      animation-delay: 4s;
      font-size: 6px;
    }

    .snowflake:nth-child(6) {
      left: 55%;
      animation-duration: 9s;
      animation-delay: 5s;
      font-size: 8px;
    }

    .snowflake:nth-child(7) {
      left: 65%;
      animation-duration: 14s;
      animation-delay: 6s;
      font-size: 7px;
    }

    .snowflake:nth-child(8) {
      left: 75%;
      animation-duration: 11s;
      animation-delay: 7s;
      font-size: 9px;
    }

    .snowflake:nth-child(9) {
      left: 85%;
      animation-duration: 16s;
      animation-delay: 8s;
      font-size: 6px;
    }

    .snowflake:nth-child(10) {
      left: 95%;
      animation-duration: 12s;
      animation-delay: 9s;
      font-size: 8px;
    }

    .snowflake:nth-child(11) {
      left: 10%;
      animation-duration: 9s;
      animation-delay: 10s;
      font-size: 7px;
    }

    .snowflake:nth-child(12) {
      left: 30%;
      animation-duration: 13s;
      animation-delay: 11s;
      font-size: 9px;
    }

    .snowflake:nth-child(13) {
      left: 50%;
      animation-duration: 11s;
      animation-delay: 12s;
      font-size: 6px;
    }

    .snowflake:nth-child(14) {
      left: 70%;
      animation-duration: 14s;
      animation-delay: 13s;
      font-size: 8px;
    }

    .snowflake:nth-child(15) {
      left: 90%;
      animation-duration: 10s;
      animation-delay: 14s;
      font-size: 7px;
    }

    .snowflake:nth-child(16) {
      left: 8%;
      animation-duration: 11s;
      animation-delay: 15s;
      font-size: 8px;
    }

    .snowflake:nth-child(17) {
      left: 18%;
      animation-duration: 14s;
      animation-delay: 16s;
      font-size: 7px;
    }

    .snowflake:nth-child(18) {
      left: 28%;
      animation-duration: 9s;
      animation-delay: 17s;
      font-size: 9px;
    }

    .snowflake:nth-child(19) {
      left: 38%;
      animation-duration: 12s;
      animation-delay: 18s;
      font-size: 6px;
    }

    .snowflake:nth-child(20) {
      left: 48%;
      animation-duration: 15s;
      animation-delay: 19s;
      font-size: 8px;
    }

    .snowflake:nth-child(21) {
      left: 58%;
      animation-duration: 10s;
      animation-delay: 20s;
      font-size: 7px;
    }

    .snowflake:nth-child(22) {
      left: 68%;
      animation-duration: 13s;
      animation-delay: 21s;
      font-size: 9px;
    }

    .snowflake:nth-child(23) {
      left: 78%;
      animation-duration: 8s;
      animation-delay: 22s;
      font-size: 6px;
    }

    .snowflake:nth-child(24) {
      left: 88%;
      animation-duration: 16s;
      animation-delay: 23s;
      font-size: 8px;
    }

    .snowflake:nth-child(25) {
      left: 98%;
      animation-duration: 11s;
      animation-delay: 24s;
      font-size: 7px;
    }

    @keyframes snowfall {
      0% {
        transform: translateY(0) translateX(-50px) rotate(0deg);
        opacity: 0;
      }

      10% {
        opacity: 0.8;
      }

      90% {
        opacity: 0.8;
      }

      100% {
        transform: translateY(130vh) translateX(150px) rotate(360deg);
        opacity: 0;
      }
    }

    /* HERO */
    .hero {
      position: relative;
      min-height: 100vh;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      text-align: center;
      color: #fff;
    }

    .hero::before {
      content: "";
      position: absolute;
      inset: 0;
      background: url('w7.jpeg') center/cover no-repeat;
    }

    .hero::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, rgba(0, 0, 0, .35), rgba(0, 0, 0, .5));
    }

    .hero-inner {
      position: relative;
      z-index: 2;
      display: grid;
      gap: 16px;
      padding: 20px;
      margin-bottom: 60px
    }

    .hero-date {
      font-family: 'Marcellus', serif;
      font-size: clamp(20px, 4vw, 28px);
      color: #fff;
      letter-spacing: .15em;
      text-shadow: 0 2px 10px rgba(0, 0, 0, .4)
    }

    .hero .countdown {
      display: flex;
      gap: 8px;
      justify-content: center;
      flex-wrap: wrap
    }

    .hero .cd-box {
      min-width: 50px;
      padding: 8px 6px;
      border-radius: 8px;
      background: rgba(255, 255, 255, .15);
      backdrop-filter: blur(4px);
      border: 1px solid rgba(255, 255, 255, .2)
    }

    .hero .cd-box .num {
      font-size: clamp(14px, 3vw, 20px);
      font-weight: 500;
      color: #fff
    }

    .hero .cd-box .lab {
      font-size: 10px;
      color: rgba(255, 255, 255, .9);
      margin-top: 2px
    }

    /* INVITATION / STORY / FAMILY (ì›ë³¸ê³¼ ë™ì¼í•œ í•µì‹¬ë§Œ ìœ ì§€) */
    .invitation {
      text-align: center;
      position: relative;
      z-index: 2;
    }

    .story {
      max-width: 880px;
      position: relative;
      z-index: 2;
    }

    .family {
      display: grid;
      gap: 18px;
      position: relative;
      z-index: 2;
    }

    .fam-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px
    }

    .fam-card {
      border: 1px solid var(--line);
      border-radius: var(--radius);
      padding: 14px;
      background: #fff
    }

    .fam-card .role {
      font-size: 13px;
      color: var(--muted)
    }

    /* STORY / INTERVIEW (ë³µêµ¬) */
    .story h2 {
      font-size: 26px;
      margin-bottom: 22px
    }

    .qa {
      display: grid;
      gap: 12px;
    }

    .qac {
      padding: 18px;
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background: #fff;
      box-shadow: var(--soft);
      text-align: left;
    }

    .q {
      font-family: 'Marcellus', serif;
      letter-spacing: .03em;
      color: #111;
      font-size: 18px;
    }

    .a {
      color: #4b4b4b;
      margin-top: 6px;
      font-size: 16px;
      line-height: 1.7;
    }

    /* GALLERY */
    .gallery {
      position: relative;
      z-index: 2;
    }

    .gallery h2 {
      margin-bottom: 14px
    }

    .gallery-container {
      position: relative
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      margin-bottom: 16px;
      opacity: 0;
      transition: opacity .18s ease;
    }

    .grid.ready {
      opacity: 1
    }

    .grid img {
      border-radius: 10px;
      cursor: pointer;
      aspect-ratio: 1/1;
      object-fit: cover;
      transition: transform 0.2s
    }

    .grid img:hover {
      transform: scale(1.05)
    }

    .gallery-nav {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 12px
    }

    .nav-btn {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      border: 1px solid var(--line);
      background: #fff;
      color: var(--ink);
      font-size: 20px;
      cursor: pointer;
      transition: all 0.2s
    }

    .nav-btn:hover {
      background: var(--accent);
      color: #fff;
      border-color: var(--accent)
    }

    .nav-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed
    }

    .gallery-info {
      text-align: center;
      color: var(--muted);
      font-size: 14px
    }

    /* Skeleton (Shimmer) */
    .skeleton {
      position: relative;
      border-radius: 10px;
      overflow: hidden;
      background: #eee;
      aspect-ratio: 1/1;
    }

    .skeleton::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, .6) 50%, rgba(255, 255, 255, 0) 100%);
      transform: translateX(-100%);
      animation: shimmer 1.2s infinite;
    }

    @keyframes shimmer {
      100% {
        transform: translateX(100%);
      }
    }

    /* Lightbox */
    .lightbox {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, .85);
      opacity: 0;
      visibility: hidden;
      transition: .3s;
      z-index: 99999;
      touch-action: none;
      -webkit-user-select: none;
      user-select: none;
    }

    .lightbox.active {
      opacity: 1;
      visibility: visible
    }

    .lightbox img {
      max-width: 90%;
      max-height: 82%;
      border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, .5);
      cursor: grab;
      transition: transform .3s ease, opacity .3s ease;
    }

    .lightbox .nav,
    .lightbox .close {
      position: absolute;
      border: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, .2);
      color: #fff;
      cursor: pointer;
      transition: all .2s ease;
      width: 44px;
      height: 44px;
      display: grid;
      place-items: center;
      font-size: 22px;
    }

    .lightbox .nav:hover,
    .lightbox .close:hover {
      background: rgba(255, 255, 255, .3);
      transform: scale(1.1);
    }

    .lightbox .prev {
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
    }

    .lightbox .next {
      right: 16px;
      top: 50%;
      transform: translateY(-50%);
    }

    .lightbox .close {
      top: 16px;
      right: 20px
    }

    .lightbox-swipe-hint {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      color: #fff;
      font-size: 14px;
      opacity: .7;
      pointer-events: none;
      animation: fadeInOut 3s ease-in-out infinite;
    }

    @keyframes fadeInOut {

      0%,
      100% {
        opacity: .3
      }

      50% {
        opacity: .7
      }
    }

    /* LOCATION */
    .location {
      position: relative;
      z-index: 2;
    }

    .loc-card {
      border: 1px solid var(--line);
      border-radius: var(--radius);
      padding: 18px;
      background: #fff;
      box-shadow: var(--soft)
    }

    .loc-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
      margin-top: 14px
    }

    .chip {
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: #fff
    }

    /* ACCOUNT */
    .account {
      position: relative;
      z-index: 2;
    }

    .account .cards {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      max-width: 720px;
      margin: 16px auto 0
    }

    .acc {
      border: 1px solid var(--line);
      border-radius: var(--radius);
      padding: 14px;
      background: #fff
    }

    .acc .who {
      font-weight: 500
    }

    .acc .bank {
      color: #555
    }

    @media (max-width:520px) {
      .fam-grid {
        grid-template-columns: 1fr
      }

      .account .cards {
        grid-template-columns: 1fr
      }
    }
  </style>
</head>

<body>
  <!-- Global Snowflakes -->
  <div class="global-snowflakes" aria-hidden="true">
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
    <div class="snowflake">â—</div>
  </div>

  <!-- HERO -->
  <header class="hero">
    <div class="hero-inner">
      <div class="hero-date">2026.01.18 SUN 1PM</div>
      <div class="countdown" id="countdown" aria-label="ì˜ˆì‹ê¹Œì§€ ë‚¨ì€ ì‹œê°„">
        <div class="cd-box">
          <div class="num" id="cd-d">00</div>
          <div class="lab">DAYS</div>
        </div>
        <div class="cd-box">
          <div class="num" id="cd-h">00</div>
          <div class="lab">HRS</div>
        </div>
        <div class="cd-box">
          <div class="num" id="cd-m">00</div>
          <div class="lab">MIN</div>
        </div>
        <div class="cd-box">
          <div class="num" id="cd-s">00</div>
          <div class="lab">SEC</div>
        </div>
      </div>
    </div>
  </header>

  <!-- INVITATION -->
  <section class="invitation">
    <h2>INVITATION</h2>
    <p>ì €í¬ ë‘ ì‚¬ëŒì˜ ì‘ì€ ë§Œë‚¨ì´</p>
    <p>ì‚¬ë‘ì˜ ê²°ì‹¤ì„ ë§ºì–´</p>
    <p>ì†Œì¤‘í•œ ê²°í˜¼ì‹ì„ ì˜¬ë¦¬ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
  </section>

  <!-- STORY -->
  <section class="story">
    <h2>OUR STORY</h2>
    <div class="qa">
      <div class="qac">
        <div class="q">ì–´ë–»ê²Œ ë§Œë‚˜ê²Œ ë˜ì—ˆë‚˜ìš”?ğŸ’•</div>
        <div class="a">ì¹œêµ¬ì˜ ì†Œê°œë¡œ ì²« ë§Œë‚¨ì„ ê°€ì¡Œê³ , ì„¸ ë²ˆì˜ ë§Œë‚¨ ëì— ì„œë¡œì˜ ë§ˆìŒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</div>
      </div>
      <div class="qac">
        <div class="q">í”„ë¡œí¬ì¦ˆëŠ”?ğŸ’</div>
        <div class="a">í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì´ë¸ŒğŸ„, ëŸ°ë˜ğŸ‡¬ğŸ‡§ í•˜ì´ë“œíŒŒí¬ì—ì„œ ì¡°ìš©íˆ ë§ˆìŒì„ ì „í–ˆìŠµë‹ˆë‹¤.</div>
      </div>
      <div class="qac">
        <div class="q">ë‹®ì€ ì ì€?ğŸ‘©â€â¤ï¸â€ğŸ‘¨</div>
        <div class="a">ì–¼êµ´ë¿ë§Œ ì•„ë‹ˆë¼, ì†Œì†Œí•œ ì¼ìƒë„ ì†Œì¤‘íˆ ì—¬ê¸°ëŠ” ë§ˆìŒì´ ë‹®ì•˜ìŠµë‹ˆë‹¤.</div>
      </div>
    </div>
  </section>

  <!-- GALLERY -->
  <section class="gallery">
    <h2>GALLERY</h2>
    <div class="gallery-container">
      <div class="grid" id="gallery" aria-live="polite"></div>
      <div class="gallery-nav">
        <button class="nav-btn prev" id="galleryPrev" aria-label="ì´ì „ í˜ì´ì§€">â€¹</button>
        <button class="nav-btn next" id="galleryNext" aria-label="ë‹¤ìŒ í˜ì´ì§€">â€º</button>
      </div>
      <div class="gallery-info">
        <span id="galleryPage">1</span> / <span id="galleryTotal">1</span>
      </div>
    </div>
    <div class="lightbox" id="lightbox" aria-hidden="true" role="dialog" aria-label="í™•ëŒ€ ë³´ê¸°">
      <button class="nav prev" id="lbPrev" aria-label="ì´ì „">â€¹</button>
      <img src="" alt="í™•ëŒ€ ì´ë¯¸ì§€" id="lbImg">
      <button class="nav next" id="lbNext" aria-label="ë‹¤ìŒ">â€º</button>
      <button class="close" id="lbClose" aria-label="ë‹«ê¸°">Ã—</button>
      <div class="lightbox-swipe-hint">â† ìŠ¤ì™€ì´í”„í•˜ì—¬ ì‚¬ì§„ ë„˜ê¸°ê¸° â†’</div>
    </div>
  </section>

  <!-- FAMILY -->
  <section class="family">
    <h2>FAMILY</h2>
    <div class="fam-grid">
      <div class="fam-card">
        <div class="role">ì‹ ë‘</div>
        <div class="name">í•œì§€ì„­</div>
        <div class="role">ë¶€ â€¢ ëª¨</div>
        <div>(æ•…)í•œìƒë¯¼ Â· ì´íš¨ì¬</div>
      </div>
      <div class="fam-card">
        <div class="role">ì‹ ë¶€</div>
        <div class="name">ìœ ì§€ì—°</div>
        <div class="role">ë¶€ â€¢ ëª¨</div>
        <div>ìœ ì„±íƒœ Â· ì„œë¬¸ìˆ™</div>
      </div>
    </div>
  </section>

  <!-- LOCATION -->
  <section class="location">
    <h2>LOCATION</h2>
    <div class="loc-card">
      <div class="loc-name">ì†Œë…¸í ë¦¬ì²´ ì»¨ë²¤ì…˜ 3ì¸µ</div>
      <div class="loc-meta">ì„œìš¸ ê°•ë‚¨êµ¬ ì˜ë™ëŒ€ë¡œ 517 Â· 2026ë…„ 1ì›” 18ì¼ (í† ) ì˜¤í›„ 1ì‹œ</div>
      <div class="loc-buttons" role="group" aria-label="ê¸¸ì°¾ê¸°">
        <a class="chip" href="https://map.naver.com/p/search/ì„œìš¸%20ê°•ë‚¨êµ¬%20ì˜ë™ëŒ€ë¡œ%20517" target="_blank"
          rel="noopener">ë„¤ì´ë²„ì§€ë„</a>
        <a class="chip" href="https://map.kakao.com/link/to/ì†Œë…¸í ë¦¬ì²´ì»¨ë²¤ì…˜,37.5133,127.0582" target="_blank"
          rel="noopener">ì¹´ì¹´ì˜¤ë§µ</a>
      </div>
      <div id="map" style="width:100%; height:360px; border-radius:12px; margin-top:14px"></div>
    </div>
  </section>

  <!-- ACCOUNT -->
  <section class="account">
    <h2>ë§ˆìŒ ì „í•˜ì‹¤ ê³³</h2>
    <div class="cards">
      <div class="acc">
        <div class="who">ì‹ ë‘ì¸¡</div>
        <div class="bank">í•˜ë‚˜ì€í–‰ 233-891128-47907 (í•œì§€ì„­)</div>
      </div>
      <div class="acc">
        <div class="who">ì‹ ë¶€ì¸¡</div>
        <div class="bank">êµ­ë¯¼ì€í–‰ 476101-01-388646 (ìœ ì§€ì—°)</div>
      </div>
    </div>
  </section>

  <script>
    // ===== Countdown (KST) =====
    const target = new Date('2026-01-18T13:00:00+09:00').getTime();
    const cdD = document.getElementById('cd-d');
    const cdH = document.getElementById('cd-h');
    const cdM = document.getElementById('cd-m');
    const cdS = document.getElementById('cd-s');
    function tick() {
      const now = Date.now();
      let diff = Math.max(0, target - now);
      const d = Math.floor(diff / (1000 * 60 * 60 * 24)); diff -= d * 86400000;
      const h = Math.floor(diff / (1000 * 60 * 60)); diff -= h * 3600000;
      const m = Math.floor(diff / (1000 * 60)); diff -= m * 60000;
      const s = Math.floor(diff / 1000);
      cdD.textContent = String(d).padStart(2, '0');
      cdH.textContent = String(h).padStart(2, '0');
      cdM.textContent = String(m).padStart(2, '0');
      cdS.textContent = String(s).padStart(2, '0');
    }
    tick(); setInterval(tick, 1000);

    // ===== Kakao Map =====
    function initMap() {
      try {
        const mapContainer = document.getElementById('map');
        if (!mapContainer) return;
        const venueCoords = new kakao.maps.LatLng(37.5133, 127.0582);
        const map = new kakao.maps.Map(mapContainer, { center: venueCoords, level: 3 });
        const marker = new kakao.maps.Marker({ map, position: venueCoords });
        const infowindow = new kakao.maps.InfoWindow({ content: '<div style="padding:8px;font-size:14px;font-weight:bold;">ì†Œë…¸í ë¦¬ì²´ ì»¨ë²¤ì…˜ 3ì¸µ</div>' });
        kakao.maps.event.addListener(marker, 'click', () => infowindow.open(map, marker));
        kakao.maps.event.addListener(map, 'tilesloaded', () => infowindow.open(map, marker));
      } catch (error) {
        const mapContainer = document.getElementById('map');
        if (mapContainer) {
          mapContainer.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;height:100%;color:#666;font-size:14px;">ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ìœ„ì˜ ë§í¬ë¥¼ ì´ìš©í•´ì£¼ì„¸ìš”.</div>';
        }
      }
    }
    function waitForKakaoMap() { if (typeof kakao !== 'undefined' && kakao.maps) initMap(); else setTimeout(waitForKakaoMap, 100); }
    if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', waitForKakaoMap); else waitForKakaoMap();

    // ===== Gallery (Skeleton + Preload + Decode) =====
    const gallery = document.getElementById('gallery');
    const galleryPrev = document.getElementById('galleryPrev');
    const galleryNext = document.getElementById('galleryNext');
    const galleryPage = document.getElementById('galleryPage');
    const galleryTotal = document.getElementById('galleryTotal');
    const lightbox = document.getElementById('lightbox');
    const lbImg = document.getElementById('lbImg');
    const lbPrev = document.getElementById('lbPrev');
    const lbNext = document.getElementById('lbNext');
    const lbClose = document.getElementById('lbClose');

    const allImages = [
      'w1.jpeg', 'w2.jpeg', 'w3.jpeg', 'w4.jpeg', 'w5.jpeg',
      'w6.jpeg', 'w7.jpeg', 'w8.jpeg', 'w9.jpeg', 'w10.jpeg',
      'w11.jpeg', 'w12.jpeg', 'w13.jpeg', 'w14.jpeg', 'w15.jpeg',
      'w16.jpeg', 'w17.jpeg', 'w18.jpeg', 'w19.jpeg', 'w20.jpeg', 'w21.jpeg'
    ];
    const imagesPerPage = 9;
    let currentPage = 1;
    let currentImageIndex = 0;
    let isAnimating = false;

    // ì´ë¯¸ì§€ í”„ë¦¬ë¡œë“œ + ë””ì½”ë“œ ìºì‹œ
    const _imgDecodeCache = new Map();
    function preloadImages(srcs) {
      return Promise.all(srcs.map(src => {
        if (_imgDecodeCache.has(src)) return _imgDecodeCache.get(src);
        const img = new Image();
        const p = new Promise((resolve, reject) => {
          img.onload = resolve;
          img.onerror = reject;
        }).then(() => (img.decode ? img.decode().catch(() => { }) : undefined));
        img.src = src;
        _imgDecodeCache.set(src, p);
        return p;
      }));
    }

    // ìŠ¤ì¼ˆë ˆí†¤ ìƒì„±
    function renderSkeletons(count) {
      gallery.classList.remove('ready');
      gallery.innerHTML = '';
      const frag = document.createDocumentFragment();
      for (let i = 0; i < count; i++) {
        const sk = document.createElement('div');
        sk.className = 'skeleton';
        sk.setAttribute('aria-hidden', 'true');
        frag.appendChild(sk);
      }
      gallery.appendChild(frag);
    }

    async function loadGalleryPage(page) {
      const totalPages = Math.ceil(allImages.length / imagesPerPage);
      currentPage = Math.min(Math.max(1, page), totalPages);

      const startIndex = (currentPage - 1) * imagesPerPage;
      const endIndex = Math.min(startIndex + imagesPerPage, allImages.length);
      const pageImages = allImages.slice(startIndex, endIndex);

      // 1) ìŠ¤ì¼ˆë ˆí†¤ ë¨¼ì € í‘œì‹œ (í˜ì´ì§€ì— ë§ëŠ” ê°œìˆ˜)
      renderSkeletons(pageImages.length);

      // 2) ì´ë¯¸ì§€ ëª¨ë‘ ì¤€ë¹„(ë¡œë”©+ë””ì½”ë“œ)ë  ë•Œê¹Œì§€ ëŒ€ê¸°
      try { await preloadImages(pageImages); } catch (e) { /* ì‹¤íŒ¨í•´ë„ ê³„ì† */ }

      // 3) í•œ ë²ˆì— êµì²´ ë Œë”
      const frag = document.createDocumentFragment();
      pageImages.forEach((src, index) => {
        const img = document.createElement('img');
        img.src = src;
        img.alt = `ì‚¬ì§„ ${startIndex + index + 1}`;
        img.decoding = 'async';
        img.loading = 'eager';
        img.onclick = () => openLightbox(startIndex + index);
        frag.appendChild(img);
      });
      gallery.innerHTML = '';
      gallery.appendChild(frag);

      // í˜ì´ì§€/ë²„íŠ¼ ìƒíƒœ ê°±ì‹ 
      galleryPage.textContent = currentPage;
      galleryTotal.textContent = totalPages;
      galleryPrev.disabled = currentPage === 1;
      galleryNext.disabled = currentPage === totalPages;

      // 4) í•œ í”„ë ˆì„ ë’¤ ë¶€ë“œëŸ½ê²Œ ë‚˜íƒ€ë‚˜ê¸°
      requestAnimationFrame(() => gallery.classList.add('ready'));
    }

    function nextPage() { if (currentPage < Math.ceil(allImages.length / imagesPerPage)) loadGalleryPage(currentPage + 1); }
    function prevPage() { if (currentPage > 1) loadGalleryPage(currentPage - 1); }

    // ë¼ì´íŠ¸ë°•ìŠ¤
    function openLightbox(index) {
      currentImageIndex = index;
      const neighbors = [
        allImages[index],
        allImages[(index - 1 + allImages.length) % allImages.length],
        allImages[(index + 1) % allImages.length]
      ];
      preloadImages(neighbors).catch(() => { });
      lbImg.style.opacity = '0';
      lbImg.src = allImages[index];
      lightbox.classList.add('active');
      document.body.style.overflow = 'hidden';
      requestAnimationFrame(() => { lbImg.style.opacity = '1'; });
    }
    function closeLightbox() { lightbox.classList.remove('active'); document.body.style.overflow = ''; }
    function showPrevImage() {
      if (isAnimating) return; isAnimating = true;
      currentImageIndex = (currentImageIndex - 1 + allImages.length) % allImages.length;
      lbImg.style.opacity = '0.5'; lbImg.style.transform = 'scale(0.95)';
      setTimeout(() => { lbImg.src = allImages[currentImageIndex]; setTimeout(() => { lbImg.style.opacity = '1'; lbImg.style.transform = 'scale(1)'; isAnimating = false; }, 50); }, 150);
    }
    function showNextImage() {
      if (isAnimating) return; isAnimating = true;
      currentImageIndex = (currentImageIndex + 1) % allImages.length;
      lbImg.style.opacity = '0.5'; lbImg.style.transform = 'scale(0.95)';
      setTimeout(() => { lbImg.src = allImages[currentImageIndex]; setTimeout(() => { lbImg.style.opacity = '1'; lbImg.style.transform = 'scale(1)'; isAnimating = false; }, 50); }, 150);
    }

    // ìŠ¤ì™€ì´í”„/ë“œë˜ê·¸(ë¼ì´íŠ¸ë°•ìŠ¤)
    let startX = 0, startY = 0, startTime = 0, isDragging = false;
    function handleTouchStart(e) { e.preventDefault(); startX = e.touches[0].clientX; startY = e.touches[0].clientY; startTime = Date.now(); isDragging = true; }
    function handleTouchMove(e) { if (!isDragging) return; e.preventDefault(); }
    function handleTouchEnd(e) {
      if (!isDragging) return; e.preventDefault();
      const endX = e.changedTouches[0].clientX; const endY = e.changedTouches[0].clientY;
      const dx = startX - endX, dy = startY - endY, dt = Date.now() - startTime;
      if (Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > 50 && dt < 300) { dx > 0 ? showNextImage() : showPrevImage(); }
      isDragging = false;
    }
    function handleMouseDown(e) { e.preventDefault(); startX = e.clientX; startY = e.clientY; startTime = Date.now(); isDragging = true; }
    function handleMouseMove(e) { if (!isDragging) return; e.preventDefault(); }
    function handleMouseUp(e) {
      if (!isDragging) return; e.preventDefault();
      const endX = e.clientX, endY = e.clientY, dx = startX - endX, dy = startY - endY, dt = Date.now() - startTime;
      if (Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > 50 && dt < 300) { dx > 0 ? showNextImage() : showPrevImage(); }
      isDragging = false;
    }

    // ì´ë²¤íŠ¸ ë°”ì¸ë”©
    galleryNext.addEventListener('click', nextPage);
    galleryPrev.addEventListener('click', prevPage);

    lbClose.addEventListener('click', (e) => { e.stopPropagation(); closeLightbox(); });
    lbPrev.addEventListener('click', (e) => { e.stopPropagation(); showPrevImage(); });
    lbNext.addEventListener('click', (e) => { e.stopPropagation(); showNextImage(); });
    lightbox.addEventListener('click', (e) => { if (e.target === lightbox) closeLightbox(); });

    lbImg.addEventListener('touchstart', handleTouchStart, { passive: false });
    lbImg.addEventListener('touchmove', handleTouchMove, { passive: false });
    lbImg.addEventListener('touchend', handleTouchEnd, { passive: false });
    lbImg.addEventListener('mousedown', handleMouseDown);
    lbImg.addEventListener('mousemove', handleMouseMove);
    lbImg.addEventListener('mouseup', handleMouseUp);
    lbImg.addEventListener('mouseleave', () => { isDragging = false; });

    window.addEventListener('keydown', (e) => {
      if (!lightbox.classList.contains('active')) return;
      if (e.key === 'Escape') closeLightbox();
      if (e.key === 'ArrowLeft') showPrevImage();
      if (e.key === 'ArrowRight') showNextImage();
    });

    // ì´ˆê¸° ë¡œë“œ
    loadGalleryPage(1);
  </script>
</body>

</html>